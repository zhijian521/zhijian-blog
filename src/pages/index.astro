---
import BaseHead from '../components/BaseHead.astro';
import { SITE_DESCRIPTION, SITE_LOGO, SITE_TITLE } from '../consts';
---

<!doctype html>
<html lang="zh-CN">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<div class="code-rain" aria-hidden="true"></div>
		<div class="noise-layer" aria-hidden="true"></div>
		<div class="data-stream" aria-hidden="true"></div>
		<div class="hud-panel hud-stack" aria-hidden="true">
			<div class="hud-row">
				<span class="hud-label">stack</span>
				<span class="hud-value">astro 5</span>
			</div>
			<div class="hud-row">
				<span class="hud-label">lang</span>
				<span class="hud-value">typescript</span>
			</div>
			<div class="hud-row">
				<span class="hud-label">content</span>
				<span class="hud-value">markdown/mdx</span>
			</div>
			<div class="hud-row">
				<span class="hud-label">runtime</span>
				<span class="hud-value">node + vite</span>
			</div>
		</div>
		<main class="page page-home">
			<section class="terminal terminal-hero">
				<div class="terminal-bar">
					<div class="terminal-title">yewen@home:~</div>
				</div>
				<div class="terminal-body">
					<img class="site-logo" src={SITE_LOGO} alt="Yewen Home logo" width="84" height="84" loading="eager" decoding="async" />
					<div class="matrix-title" data-text="YEWEN HOME">YEWEN HOME</div>
					<div class="hero-actions">
						<a class="hero-action" href="/blog/">ARTICLES</a>
						<a
							class="hero-action"
							href="https://github.com/zhijian521/zhijian-blog"
							target="_blank"
							rel="noreferrer"
						>
							GITHUB
						</a>
					</div>
					<p class="hero-line">
						<span class="prompt">&gt;</span>{SITE_DESCRIPTION}
					</p>
					<p class="hero-sub">
						<span class="type-line">$ echo "记录思考，分享知识。"</span>
						<span class="cursor" aria-hidden="true"></span>
					</p>
				</div>
			</section>
		</main>
		<script type="module">
			document.addEventListener("DOMContentLoaded", () => {
				const typeLine = document.querySelector(".type-line");
				if (!typeLine) return;

				const fullText = typeLine.textContent ?? "";
				if (!fullText) return;

				const prefersReducedMotion = window.matchMedia(
					"(prefers-reduced-motion: reduce)"
				).matches;
				if (prefersReducedMotion) return;

				typeLine.textContent = "";
				let index = 0;
				const baseDelay = 48;
				const variance = 36;

				const typeNext = () => {
					index += 1;
					typeLine.textContent = fullText.slice(0, index);
					if (index < fullText.length) {
						const jitter = Math.random() * variance;
						window.setTimeout(typeNext, baseDelay + jitter);
					}
				};

				window.setTimeout(typeNext, 320);
			});
		</script>
	</body>
</html>
